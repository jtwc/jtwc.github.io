<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>R notes for S&amp;DS 220</title>
  <meta name="description" content="These notes organize and summarize the R material you need to know for S&amp;DS 220.">
  <meta name="generator" content="bookdown 0.6 and GitBook 2.6.7">

  <meta property="og:title" content="R notes for S&amp;DS 220" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="These notes organize and summarize the R material you need to know for S&amp;DS 220." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R notes for S&amp;DS 220" />
  
  <meta name="twitter:description" content="These notes organize and summarize the R material you need to know for S&amp;DS 220." />
  

<meta name="author" content="">


<meta name="date" content="2018-03-27">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="markdown.html">
<link rel="next" href="statistics.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R notes from S&DS 220</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="1" data-path="basics.html"><a href="basics.html"><i class="fa fa-check"></i><b>1</b> Basics</a><ul>
<li class="chapter" data-level="1.1" data-path="basics.html"><a href="basics.html#setting-up"><i class="fa fa-check"></i><b>1.1</b> Setting up</a></li>
<li class="chapter" data-level="1.2" data-path="basics.html"><a href="basics.html#language-fundamentals"><i class="fa fa-check"></i><b>1.2</b> Language fundamentals</a><ul>
<li class="chapter" data-level="1.2.1" data-path="basics.html"><a href="basics.html#functions"><i class="fa fa-check"></i><b>1.2.1</b> Functions</a></li>
<li class="chapter" data-level="1.2.2" data-path="basics.html"><a href="basics.html#conditionals"><i class="fa fa-check"></i><b>1.2.2</b> Conditionals</a></li>
<li class="chapter" data-level="1.2.3" data-path="basics.html"><a href="basics.html#loops"><i class="fa fa-check"></i><b>1.2.3</b> Loops</a></li>
<li class="chapter" data-level="1.2.4" data-path="basics.html"><a href="basics.html#workspace"><i class="fa fa-check"></i><b>1.2.4</b> Workspace</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="basics.html"><a href="basics.html#r-packages"><i class="fa fa-check"></i><b>1.3</b> R packages</a></li>
<li class="chapter" data-level="1.4" data-path="basics.html"><a href="basics.html#more"><i class="fa fa-check"></i><b>1.4</b> More</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="plotting.html"><a href="plotting.html"><i class="fa fa-check"></i><b>2</b> Plotting</a><ul>
<li class="chapter" data-level="2.1" data-path="plotting.html"><a href="plotting.html#histograms"><i class="fa fa-check"></i><b>2.1</b> Histograms</a></li>
<li class="chapter" data-level="2.2" data-path="plotting.html"><a href="plotting.html#scatterplots"><i class="fa fa-check"></i><b>2.2</b> Scatterplots</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="markdown.html"><a href="markdown.html"><i class="fa fa-check"></i><b>3</b> Markdown</a></li>
<li class="chapter" data-level="4" data-path="probability.html"><a href="probability.html"><i class="fa fa-check"></i><b>4</b> Probability</a><ul>
<li class="chapter" data-level="4.1" data-path="probability.html"><a href="probability.html#sampling-from-a-vector"><i class="fa fa-check"></i><b>4.1</b> Sampling from a vector</a></li>
<li class="chapter" data-level="4.2" data-path="probability.html"><a href="probability.html#four-basic-functions-for-common-distributions"><i class="fa fa-check"></i><b>4.2</b> Four basic functions for common distributions</a></li>
<li class="chapter" data-level="4.3" data-path="probability.html"><a href="probability.html#simulation"><i class="fa fa-check"></i><b>4.3</b> Simulation</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="statistics.html"><a href="statistics.html"><i class="fa fa-check"></i><b>5</b> Statistics</a><ul>
<li class="chapter" data-level="5.1" data-path="statistics.html"><a href="statistics.html#binomial-statistics"><i class="fa fa-check"></i><b>5.1</b> Binomial statistics</a></li>
<li class="chapter" data-level="5.2" data-path="statistics.html"><a href="statistics.html#more-to-come"><i class="fa fa-check"></i><b>5.2</b> More to come</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R notes for S&amp;DS 220</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="probability" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> Probability</h1>
<div id="sampling-from-a-vector" class="section level2">
<h2><span class="header-section-number">4.1</span> Sampling from a vector</h2>
<p>The <code>sample</code> command draws a specified number of entries from a vector. If you want to randomly pick three (numbered) students from a class of ten, you can run <code>sample(1:10, 3)</code>.</p>
<p>Sometimes you want to draw <em>with replacement</em>, meaning that each pick ignores what has happened previously; after each draw, you <em>replace</em> your pick before drawing again. For instance, if you want to randomly assign twenty tasks to four employees, you could run <code>sample(1:4, 20, replace=TRUE)</code>. If you want employee number 1 to have twice as large of a probability as the other employees of being assigned each task, you’ll need to use the <code>prob</code> parameter: <code>sample(1:4, 20, replace=TRUE, prob=c(2, 1, 1, 1)</code>.</p>
</div>
<div id="four-basic-functions-for-common-distributions" class="section level2">
<h2><span class="header-section-number">4.2</span> Four basic functions for common distributions</h2>
<p>For several families of distributions, the R language has four built-in functions corresponding to:</p>
<ul>
<li>Density (pdf for continuous distributions, pmf for discrete distributions)</li>
<li>Probability less than or equal (cdf)</li>
<li>Quantile (inverse cdf)</li>
<li>Random sample</li>
</ul>
<p>The function names follow the pattern “d,” “p,” “q,” or “r” followed by an abbreviation for the family of distributions. For example, the probability of getting four heads out of ten flips of a coin with heads-probability .25 is calculated by the R command <code>dbinom(4, 10, .25)</code>. The probability of four or fewer heads is <code>pbinom(4, 10, .25)</code>. Next, <code>qbinom(.95, 10, .25)</code> tells you the smallest number of heads for which there is no more than .05 probability of exceeding. Finally, <code>rbinom(100, 10, .25)</code> simulates one hundred experiments of the twenty coin flips and tells you how many heads it got in each trial.</p>
<p>For Normal distributions, the abbreviation is “norm.” If no additional parameters are specified, it assumes you want mean zero and standard deviation one. Otherwise use the second and third parameters (named “mean” and “sd”).</p>
<p>Binomial distributions are discrete whereas Normal distributions are continuous. The four functions work in both cases.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw">plot</span>(<span class="dv">0</span><span class="op">:</span><span class="dv">10</span>, <span class="kw">dbinom</span>(<span class="dv">0</span><span class="op">:</span><span class="dv">10</span>, <span class="dv">10</span>, <span class="fl">.25</span>))</a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="kw">curve</span>(<span class="kw">dnorm</span>(x, <span class="dt">mean=</span><span class="dv">10</span><span class="op">*</span>.<span class="dv">25</span>, <span class="dt">sd=</span><span class="kw">sqrt</span>(<span class="dv">10</span><span class="op">*</span>.<span class="dv">25</span><span class="op">*</span>.<span class="dv">75</span>)), <span class="dt">from=</span><span class="dv">0</span>, <span class="dt">to=</span><span class="dv">10</span>, <span class="dt">add=</span><span class="ot">TRUE</span>, <span class="dt">col=</span><span class="dv">2</span>)</a></code></pre></div>
<p><img src="Intensive-Stats-R_files/figure-html4/unnamed-chunk-4-1.png" width="672" /></p>
<p>Another family built in to R is the uniform distributions, abbreviated “unif.” In particular, <code>runif(n)</code> generates <code>n</code> independent draws from the Uniform(0, 1) distribution.</p>
<p>Before asking the R interpreter to perform a random draw, you might want to use the <code>set.seed</code> command with any integer as the input. This sets a “starting point” for the random draw so that the exact same “random” results can be replicated by the code at a later time or by another computer.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw">runif</span>(<span class="dv">5</span>)</a></code></pre></div>
<pre><code>## [1] 0.48177740 0.08033515 0.19638870 0.86257029 0.79840328</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw">set.seed</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb20-2" data-line-number="2"><span class="kw">runif</span>(<span class="dv">5</span>)</a></code></pre></div>
<pre><code>## [1] 0.2655087 0.3721239 0.5728534 0.9082078 0.2016819</code></pre>
<p>When you run the above code, my first <code>runif(5)</code> output will differ from yours, but our draws will agree after we’ve both set the seed to 1.</p>
</div>
<div id="simulation" class="section level2">
<h2><span class="header-section-number">4.3</span> Simulation</h2>
<p>In a room of 100 people, is it likely that you will be able to find a birthday shared by two people? What about three people? Four? Let’s pretend that leap-years don’t exist, that each day of the year is equally likely to be a person’s birthday, and that the people’s birthdays are independent. Now we draw random birthdays accordingly.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">n &lt;-<span class="st"> </span><span class="dv">100</span></a>
<a class="sourceLine" id="cb22-2" data-line-number="2"><span class="kw">set.seed</span>(<span class="dv">4</span>)</a>
<a class="sourceLine" id="cb22-3" data-line-number="3">b &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">365</span>, n, <span class="dt">replace=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb22-4" data-line-number="4">b</a></code></pre></div>
<pre><code>##   [1] 214   4 108 102 297  96 265 331 347  27 276 105  37 349 152 167 355
##  [18] 214 352 279 261 364 185 179 237 304 176 308 188 194 207  88 321 239
##  [35] 177 355 168 228 142   3 343  89 207  67 331  31 329 326 265 207 142
##  [52] 273 327 296 299 154  65  64 326 272 205  27 312 334  83 230  26 188
##  [69] 294 355 126 231 150 127 302 252 118 162  96  49 333 259 209 335 330
##  [86]  22  17 361  76 340  71  47 197 100 130  31 280 163  14 256</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="kw">table</span>(b)</a></code></pre></div>
<pre><code>## b
##   3   4  14  17  22  26  27  31  37  47  49  64  65  67  71  76  83  88 
##   1   1   1   1   1   1   2   2   1   1   1   1   1   1   1   1   1   1 
##  89  96 100 102 105 108 118 126 127 130 142 150 152 154 162 163 167 168 
##   1   2   1   1   1   1   1   1   1   1   2   1   1   1   1   1   1   1 
## 176 177 179 185 188 194 197 205 207 209 214 228 230 231 237 239 252 256 
##   1   1   1   1   2   1   1   1   3   1   2   1   1   1   1   1   1   1 
## 259 261 265 272 273 276 279 280 294 296 297 299 302 304 308 312 321 326 
##   1   1   2   1   1   1   1   1   1   1   1   1   1   1   1   1   1   2 
## 327 329 330 331 333 334 335 340 343 347 349 352 355 361 364 
##   1   1   1   2   1   1   1   1   1   1   1   1   3   1   1</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="kw">max</span>(<span class="kw">table</span>(b))</a></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>The <code>table</code> command scans through a vector and counts the number of occurrences of each value. The <code>max</code> tells us that there is at least one birthday shared by three people but no birthdays are shared by four or more.</p>
<p>But this is a single run of the experiment. To get a better idea of the range of possible outcomes and how probable they are, we want to run the experiment a large number of times.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">nsim &lt;-<span class="st"> </span><span class="dv">10000</span></a>
<a class="sourceLine" id="cb28-2" data-line-number="2">results &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="ot">NA</span>, nsim)</a>
<a class="sourceLine" id="cb28-3" data-line-number="3"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>nsim) {</a>
<a class="sourceLine" id="cb28-4" data-line-number="4">  b &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">365</span>, n, <span class="dt">replace=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb28-5" data-line-number="5">  results[i] &lt;-<span class="st"> </span><span class="kw">max</span>(<span class="kw">table</span>(b))</a>
<a class="sourceLine" id="cb28-6" data-line-number="6">}</a>
<a class="sourceLine" id="cb28-7" data-line-number="7"><span class="kw">table</span>(results)<span class="op">/</span>nsim</a></code></pre></div>
<pre><code>## results
##      2      3      4      5      6 
## 0.3598 0.5786 0.0586 0.0029 0.0001</code></pre>
<hr />
<p><strong>Exercise:</strong> The following simulation code runs fine, but it doesn’t perform a valid simulation. Identify the TWO flaws and fix them.</p>
<pre><code>n &lt;- 100
nsim &lt;- 10000
results &lt;- rep(NA, nsim)
for(i in 1:nsim) {
  set.seed(3)
  results &lt;- max(rnorm(n))
}</code></pre>
<p>Run your fixed version of the simulation and plot a <code>truehist</code> of the results.</p>
<hr />

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="markdown.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="statistics.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": ["Intensive-Stats-R.pdf", "Intensive-Stats-R.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
